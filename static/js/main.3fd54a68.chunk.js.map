{"version":3,"sources":["sp500/store/constants.js","constants.js","sp500/store/actionCreators.js","sp500/chart.js","sp500/index.js","sp500/store/reducer.js","store/reducer.js","store/index.js","index.js"],"names":["INIT_DATA_LIST","CHANGE_CURRENT_CITY","CHART_CODE_LIST","IS_LOADING_STRING","getMtData","dispatch","t","Date","parse","url","window","location","href","axios","get","then","res","srcData","openBreadth","highBreadth","lowBreadth","lastBreadth","dayList","codeList","totalList","mv20CodeList","mv20DataList","lineDataList","data","JSON","Base64","decode","i","length","key","Math","floor","push","day","code","breadth","tk","ck","j","n","tn","mv20source","map","arr","name","sales","mv20TotalSource","type","constants","dataList","isLoading","lastTime","last_time","InitDataList","catch","console","log","LeftChart","props","scale","values","days","nice","height","autoFit","forceFit","position","tickLine","grid","alignTick","line","style","lineWidth","lineDash","stroke","title","offsetY","shared","showMarkers","color","label","offset","fill","shadowBlur","shadowColor","RightChart","visible","LineChart","className","fontSize","textAlign","min","padding","shape","showCrosshairs","SP500","fetchData","this","initData","Header","Layout","Footer","lastTimeText","theme","mode","defaultSelectedKeys","Item","justify","align","xs","span","sm","md","lg","xl","message","banner","gutter","value","size","direction","onClick","success","danger","open","refreshData","setInterval","clearInterval","Component","connect","state","getIn","breadthChartHigh","defaultState","fromJS","totalLList","chartList","breadthDays","changeCurrentCity","action","result","currentCity","currentZoom","merge","initDataList","reducer","combineReducers","sp500","sp500Reducer","enhancer","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","applyMiddleware","thunk","store","createStore","App","ReactDOM","render","document","getElementById"],"mappings":"yWACaA,EAAiB,uBACjBC,EAAsB,6BCFtBC,EAAkB,CAAC,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,OAGrFC,EAAoB,YCyGpBC,EAAY,WACvB,OAAO,SAACC,GAEN,IAAIC,EAAI,MAAQC,KAAKC,MAAM,IAAID,MAAU,IACrCE,EAAMC,OAAOC,SAASC,KAE1BC,IAAMC,IAAIL,EAAM,oBAAsBH,EADzB,CAAC,gBAAiB,aACkBS,MAAK,SAACC,GACrDX,EAxGsB,SAACY,GAW3B,IATA,IAMIC,EAAaC,EAAaC,EAAYC,EANtCC,EAAU,GACVC,EAAW,GACXC,EAAY,GACZC,EAAe,GACfC,EAAe,GACfC,EAAe,GAEfC,EAAOC,KAAKrB,MAAMsB,IAAOC,OAAOd,EAAQW,OAElCI,EAAE,EAAGA,EAAEJ,EAAKK,OAAQD,IAAI,CAChC,IAAK,IAAIE,KAAON,EAAKI,GAAGJ,KACa,MAA/BA,EAAKI,GAAGJ,KAAKM,GAAb,QACFN,EAAKI,GAAGJ,KAAKM,GAAb,MAA6B,GAE/BN,EAAKI,GAAGJ,KAAKM,GAAb,MAA6BC,KAAKC,MAAMR,EAAKI,GAAGJ,KAAKM,GAAb,OACxCN,EAAKI,GAAGE,GAAON,EAAKI,GAAGJ,KAAKM,GAAb,MAKjBP,EAAaU,KAAK,CAACC,IAAIV,EAAKI,GAAL,KAAiBO,KAAM,QAASC,QAAQL,KAAKC,MAAMR,EAAKI,GAAL,SAC1EV,EAAQe,KAAKT,EAAKI,GAAL,MAKf,IAAK,IAAIS,KAAMb,EAAK,GACP,SAAPa,GACFlB,EAASc,KAAKI,GAKlB,IAAK,IAAIC,KAAMd,EAAK,GAAGA,KACrBH,EAAaY,KAAKK,GAKpB,IAAM,IAAIC,EAAE,EAAGA,EAAEzC,EAAgB+B,OAAQU,IACvC,IAAM,IAAIC,EAAE,EAAEA,EAAEhB,EAAKK,OAAQW,IAC3BlB,EAAaW,KAAK,CAACM,EAAEC,EAAGhB,EAAKgB,GAAG1C,EAAgByC,MAKpD,IAAK,IAAIrC,EAAE,EAAGA,EAAG,CAAC,SAAS2B,OAAQ3B,IACjC,IAAM,IAAIuC,EAAG,EAAEA,EAAGjB,EAAKK,OAAQY,IAC7BrB,EAAUa,KAAK,CAAC/B,EAAEuC,EAAIV,KAAKC,MAAMR,EAAKiB,GAAL,SAIrCxB,EAAcG,EAAUA,EAAUS,OAAO,GAAG,GAC5Cd,EAAcgB,KAAKC,MAAMR,EAAKN,EAAQW,OAAO,GAApB,YACzBb,EAAae,KAAKC,MAAMR,EAAKN,EAAQW,OAAO,GAApB,WACxBf,EAAciB,KAAKC,MAAMR,EAAKN,EAAQW,OAAO,GAApB,YAEzB,IAAMa,EAAapB,EAAaqB,KAAI,SAACC,GACnC,MAAO,CACLC,KAAMD,EAAI,GACVV,IAAKU,EAAI,GACTE,MAAOF,EAAI,OAGTG,EAAkB3B,EAAUuB,KAAI,SAACC,GACrC,MAAO,CACLC,KAAMD,EAAI,GACVV,IAAKU,EAAI,GACTE,MAAOF,EAAI,OAIf,MAAO,CACLI,KAAMC,EACNC,SAAU1B,EACVJ,UAAW2B,EACX7B,QAASA,EACTC,SAAUA,EACVG,aAAcoB,EACdS,WAAW,EACXlC,YAAaA,EACbmC,SAAUvC,EAAQwC,UAClB9B,aAAcA,EACdR,YAAaA,EACbC,WAAYA,EACZF,YAAaA,GAiBFwC,CAAa1C,EAAIY,UACvB+B,OAAM,WACPC,QAAQC,IAAI,c,QCxGdC,EAAY,SAACC,GACjB,IAAMC,EAAQ,CACZf,KAAM,CACJG,KAAM,MAENa,OAAQ,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,QAExF3B,IAAK,CACHc,KAAM,MACNa,OAAQF,EAAMG,MAAQ,IAExBhB,MAAO,CACLiB,MAAM,IAIV,OAAO,eAAC,QAAD,CACLH,MAAOA,EACPI,OAAQ,IACRxC,KAAMmC,EAAMnC,KACZyC,SAAO,EACPC,UAAU,EALL,UAQL,cAAC,OAAD,CACErB,KAAM,OACNsB,SAAS,MAETC,SAAU,KACVC,KAAM,CACJC,WAAW,EACXC,KAAM,CACJC,MAAO,CACLC,UAAW,EACXC,SAAU,KACVC,OAAQ,eAKhB,cAAC,OAAD,CACE9B,KAAM,MACN+B,MAAO,KACPP,KAAM,CACJC,WAAW,EACXC,KAAM,CACJC,MAAO,CACLC,UAAW,EACXC,SAAU,KACVC,OAAQ,eAKhB,cAAC,SAAD,CAAQR,SAAS,WAAWU,QAAS,MAErC,cAAC,UAAD,CAASC,QAAM,EAACC,aAAa,IAC7B,cAAC,UAAD,CACEZ,SAAU,WAEVa,MAAO,CAAC,QAAS,2BACjBC,MAAO,CAAC,QAAS,CACfC,QAAS,EACTV,MAAO,CACLW,KAAM,UACNC,WAAY,GACZC,YAAa,0BAUnB,cAAC,cAAD,CAAarC,KAAM,uBAKjBsC,EAAa,SAAC3B,GAClB,IAAMC,EAAQ,CACZf,KAAM,CACJG,KAAM,MACNa,OAAQ,CAAC,UAEX3B,IAAK,CACHc,KAAM,MACNa,OAAQF,EAAMG,MAAQ,IAExBhB,MAAO,CACLiB,MAAM,IAIV,OAAO,eAAC,QAAD,CACLH,MAAOA,EACPI,OAAQ,IACRxC,KAAMmC,EAAMnC,KACZyC,SAAO,EACPC,UAAU,EALL,UAQL,cAAC,OAAD,CACErB,KAAM,OACNsB,SAAS,MAETC,SAAU,KACVC,KAAM,CACJC,WAAW,EACXC,KAAM,CACJC,MAAO,CACLC,UAAW,EACXC,SAAU,KACVC,OAAQ,eAKhB,cAAC,OAAD,CACE9B,KAAM,MACN+B,MAAO,KACPW,SAAS,EACTlB,KAAM,CACJC,WAAW,EACXC,KAAM,CACJC,MAAO,CACLC,UAAW,EACXC,SAAU,KACVC,OAAQ,eAKhB,cAAC,UAAD,CAASG,QAAM,EAACC,aAAa,IAC7B,cAAC,SAAD,CAAQZ,SAAS,YAAYU,QAAS,MACtC,cAAC,UAAD,CACEV,SAAU,WACVa,MAAO,CAAC,QAAS,2BACjBC,MAAO,CAAC,QAAS,CACfC,QAAS,EACTV,MAAO,CACLW,KAAM,UACNC,WAAY,GACZC,YAAa,0BAUnB,cAAC,cAAD,CAAarC,KAAM,uBAIjBwC,EAAY,SAAC7B,GAcjB,OAAO,gCACL,oBAAI8B,UAAU,YAAYjB,MARjB,CACPkB,SAAS,GACTV,MAAM,OACNW,UAAU,UAKZ,oDAGA,eAAC,QAAD,CAAO/B,MAAO,CAACxB,QAAS,CAACwD,IAAK,IAAKC,QAAS,CAAC,GAAI,GAAI,GAAI,IAAK5B,SAAO,EAACD,OAAQ,IAAKxC,KAAMmC,EAAMnC,KAA/F,UAEE,cAAC,OAAD,CAAMsE,MAAM,OAAO3B,SAAS,cAAca,MAAM,KAChD,cAAC,QAAD,CAAOb,SAAS,cAAca,MAAM,KACpC,cAAC,UAAD,CAASF,QAAQ,EAAOiB,gBAAc,WCvLtCC,E,kDACJ,WAAYrC,GAAQ,IAAD,6BACjB,cAAMA,GACgB,kBAAXrD,QAAqB,EAAK2F,YAFpB,E,kLAMXC,KAAKvC,MAAMwC,W,qIAGT,IAAD,OACAC,EAAkBC,IAAlBD,OAAQE,EAAUD,IAAVC,OADR,EAQHJ,KAAKvC,MAJGvC,GAJL,EAIL8B,SAJK,EAIK9B,WAAqBF,GAJ1B,EAIgBC,SAJhB,EAI0BD,SACjBI,GALT,EAKLD,aALK,EAKSC,cAAcC,EALvB,EAKuBA,aAC5B4B,EANK,EAMLA,UAAWlC,EANN,EAMMA,YAAamC,EANnB,EAMmBA,SACxBrC,EAPK,EAOLA,YAAaC,EAPR,EAOQA,WAAYF,EAPpB,EAOoBA,YAGrByF,EAAe,yCAAanD,EAElC,OACE,eAAC,IAAD,WACE,cAACgD,EAAD,CAAQX,UAAU,SAAlB,SACE,cAAC,IAAD,CAAMe,MAAM,OAAOC,KAAK,aAAaC,oBAAqB,CAAC,KAA3D,SACE,cAAC,IAAKC,KAAN,4BAAe,SAGnB,cAAC,IAAD,CAAKC,QAAQ,SAASC,MAAM,MAA5B,SACE,cAAC,IAAD,CAAKC,GAAI,CAACC,KAAM,IAAKC,GAAI,CAACD,KAAM,IAAKE,GAAI,CAACF,KAAM,IAAKG,GAAI,CAACH,KAAM,IAAKI,GAAI,CAACJ,KAAM,IAAKF,MAAM,MAA3F,SACE,cAAC,IAAD,CAAOO,QAASb,EAAcvD,KAAK,OAASqE,QAAM,QAItD,eAAC,IAAD,CAAKC,OAAQ,CAAC,EAAG,GAAIV,QAAQ,SAASpC,MAAO,CAACqB,QAAS,UAAvD,UACE,eAAC,IAAD,CAAKiB,GAAI,CAACC,KAAM,EAAG7B,OAAQ,GAAI8B,GAAI,CAACD,KAAM,EAAG7B,OAAQ,GAAI+B,GAAI,CAACF,KAAM,GAAI7B,OAAQ,GAAIgC,GAAI,CAACH,KAAM,EAAG7B,OAAQ,GACrGiC,GAAI,CAACJ,KAAM,EAAG7B,OAAQ,GAD3B,UAGI/B,EACI,8BAAMpD,IACN,cAAC,IAAD,CAAW6E,MAAM,iBAAiB2C,MAAOtG,IAG/C,eAAC,IAAD,CAAc2D,MAAM,GAApB,UACE,cAAC,IAAa+B,KAAd,CAAmB1B,MAAM,eAAzB,SAA+BlE,IAC/B,cAAC,IAAa4F,KAAd,CAAmB1B,MAAM,eAAzB,SAA+BjE,IAC/B,cAAC,IAAa2F,KAAd,CAAmB1B,MAAM,eAAzB,SAA+BnE,UAGnC,cAAC,IAAD,CAAKgG,GAAI,CAACC,KAAM,EAAG7B,OAAQ,GAAI8B,GAAI,CAACD,KAAM,EAAG7B,OAAQ,GAAI+B,GAAI,CAACF,KAAM,GAAI7B,OAAQ,GAAIgC,GAAI,CAACH,KAAM,EAAG7B,OAAQ,GACrGiC,GAAI,CAACJ,KAAM,EAAG7B,OAAQ,GAD3B,SAGA,eAAC,IAAD,CAAOsC,KAAM,GAAIC,UAAU,WAA3B,UACI,cAAC,IAAD,CAAS7C,MAAM,uDAAeI,MAAM,OAApC,SACE,cAAC,IAAD,CAAQhC,KAAK,UAAU0E,QAAS,WAC9B,EAAK/D,MAAMwC,WACXiB,IAAQO,QAAQ,uBAFlB,2BAD6C,aAO/C,cAAC,IAAD,CAAS/C,MAAM,qBAAWI,MAAM,MAAhC,SACE,cAAC,IAAD,CAAQ4C,QAAM,EAACF,QAAS,WACtBpH,OAAOuH,KHxEC,iCGuEV,uCADwC,oBAUhD,cAAC,IAAD,CAAKjB,QAAQ,SAASC,MAAM,MAA5B,SACE,cAAC,IAAD,CAAKC,GAAI,CAACC,KAAM,IAAKC,GAAI,CAACD,KAAM,IAAKE,GAAI,CAACF,KAAM,IAAKG,GAAI,CAACH,KAAM,IAAKI,GAAI,CAACJ,KAAM,IAAKF,MAAM,MAA3F,SAEI1D,EACI,8BAAMpD,IACN,cAAC,EAAD,CAAWyB,KAAMD,QAI3B,eAAC,IAAD,CAAKqF,QAAQ,SAASC,MAAM,MAA5B,UAEE,cAAC,IAAD,CAAKC,GAAI,CAACC,KAAM,GAAIC,GAAI,CAACD,KAAM,IAAKE,GAAI,CAACF,KAAM,IAAKG,GAAI,CAACH,KAAM,IAAKI,GAAI,CAACJ,KAAM,IAAKF,MAAM,MAA1F,SAEI1D,EACI,8BAAMpD,IACN,cAAC,EAAD,CAAWyB,KAAMF,EAAcwC,KAAM5C,MAK7C,cAAC,IAAD,CAAK4F,GAAI,CAACC,KAAM,GAAIC,GAAI,CAACD,KAAM,GAAIE,GAAI,CAACF,KAAM,GAAIG,GAAI,CAACH,KAAM,GAAII,GAAI,CAACJ,KAAM,GAAI7B,OAAQ,EAAG2B,MAAM,MAAjG,SAEI1D,EACI,8BAAMpD,IACN,cAAC,EAAD,CAAYyB,KAAMJ,EAAW0C,KAAM5C,SAI7C,cAACoF,EAAD,CAAQ9B,MAAO,CAACmB,UAAW,UAA3B,iE,0CAKe,IAAD,OAGlBO,KAAK4B,YAAcC,aAAY,WAC7B,EAAKpE,MAAMwC,aACV,O,6CAIH6B,cAAc9B,KAAK4B,iB,GAjHHG,aAsJLC,eA/BE,SAACC,GAChB,MAAO,CACLjF,SAAUiF,EAAMC,MAAM,CAAC,QAAS,aAChChH,UAAW+G,EAAMC,MAAM,CAAC,QAAS,cACjCjH,SAAUgH,EAAMC,MAAM,CAAC,QAAS,aAChClH,QAASiH,EAAMC,MAAM,CAAC,QAAS,YAC/B/G,aAAc8G,EAAMC,MAAM,CAAC,QAAS,iBACpC9G,aAAc6G,EAAMC,MAAM,CAAC,QAAS,iBACpCjF,UAAWgF,EAAMC,MAAM,CAAC,QAAS,cACjCnH,YAAakH,EAAMC,MAAM,CAAC,QAAS,gBACnCrH,YAAaoH,EAAMC,MAAM,CAAC,QAAS,gBACnCpH,WAAYmH,EAAMC,MAAM,CAAC,QAAS,eAClCtH,YAAaqH,EAAMC,MAAM,CAAC,QAAS,gBACnChF,SAAU+E,EAAMC,MAAM,CAAC,QAAS,aAChC7G,aAAc4G,EAAMC,MAAM,CAAC,QAAS,iBACpCC,iBAAkBF,EAAMC,MAAM,CAAC,QAAS,yBAKxB,SAACnI,GACnB,MAAO,CAELkG,SAFK,WAGHlG,EAASD,SAOAkI,CAA+BlC,G,kCC7JxCsC,EAAeC,iBAAO,CAC1BrF,SAAU,GACVsF,WAAY,GACZtH,QAAS,GACTC,SAAU,GACVE,aAAcvB,EACdwB,aAAc,GACdmH,UAAU,GACVC,YAAa,IACbvF,WAAW,EACXlC,YAAa,EACbmC,SAAUrD,IAIN4I,EAAoB,SAACR,EAAOS,GAChC,IAAIC,EAAS,CACX,YAAeD,EAAOE,YACtB,YAAeF,EAAOG,aAExB,OAAOZ,EAAMa,MAAMH,IAGfI,EAAe,SAACd,EAAOS,GAC3B,OAAOT,EAAMa,MAAM,CACjB9F,SAAU0F,EAAO1F,SACjB9B,UAAWwH,EAAOxH,UAClBF,QAAQ0H,EAAO1H,QACfC,SAASyH,EAAOzH,SAChBE,aAAauH,EAAOvH,aACpBC,aAAasH,EAAOtH,aACpB6B,UAAUyF,EAAOzF,UACjBlC,YAAY2H,EAAO3H,YACnBF,YAAa6H,EAAO7H,YACpBC,WAAY4H,EAAO5H,WACnBF,YAAa8H,EAAO9H,YACpBsC,SAASwF,EAAOxF,SAChB7B,aAAaqH,EAAOrH,aACpB8G,iBAAiBO,EAAOP,oBAqBba,EAbC,WAAmC,IAAlCf,EAAiC,uDAAzBG,EAAcM,EAAW,uCAChD,OAAOA,EAAO5F,MACZ,KAAKC,EACH,OAAOgG,EAAad,EAAOS,GAC7B,KAAK3F,EACH,OAAO0F,EAAkBR,EAAOS,GAClC,QACE,OAAOT,ICjDEe,EALCC,0BAAgB,CAE/BC,MAAOC,ICMFC,GADmBhJ,OAAOiJ,qCAAuCjJ,OAAOiJ,qCAAqC,IAAMC,KAExHC,YAAgBC,MASFC,EALDC,YACbV,EACAI,GCTKO,EACF,cAAC,IAAD,CAAUF,MAAOA,EAAjB,SACI,cAAC,EAAD,MAIRG,IAASC,OACLF,EACAG,SAASC,eAAe,c","file":"static/js/main.3fd54a68.chunk.js","sourcesContent":["\nexport const INIT_DATA_LIST = 'sp500/INIT_DATA_LIST';\nexport const CHANGE_CURRENT_CITY = 'vipmap/CHANGE_CURRENT_CITY';\nexport const CHANGE_CURRENT_ZOOM = 'vipmap/CHANGE_CURRENT_ZOOM';","export const CHART_CODE_LIST = ['SPX','COM','CND','CNS','ENE','FIN','HLT','IND','MAT','REI','TEC','UTL']\nexport const ALL_CHART_SP500_LIST =  ['SPX','COM','CND','CNS','ENE','FIN','HLT','IND','MAT','REI','TEC','UTL','TOTAL']\nexport const PAYPAL_URL = 'https://www.paypal.me/kenteb';\nexport const IS_LOADING_STRING = \"Loading..\"\nexport const BREADTH_CHART_HIGH = 1000","import axios from \"axios\"\nimport Base64  from 'base-64';\nimport * as constants from './constants';\nimport {CHART_CODE_LIST} from \"../../constants\";\n\nexport const changeCurrentCity = (city, zoom) => ({\n  type: constants.CHANGE_CURRENT_CITY,\n  currentCity: city,\n  currentZoom: zoom,\n})\n\nexport const InitDataList = (srcData) => {\n  // 数据处理\n  var dayList = [];\n  var codeList = [];\n  var totalList = [];\n  var mv20CodeList = [];\n  var mv20DataList = [];\n  var lineDataList = [];\n  var openBreadth, highBreadth, lowBreadth, lastBreadth = 0\n  var data = JSON.parse(Base64.decode(srcData.data))\n\n  for ( var i=0; i<data.length; i++){\n    for (var key in data[i].data){\n      if (data[i].data[key]['close'] === 0.01 ){\n        data[i].data[key]['close'] = 0\n      }\n      data[i].data[key]['close'] = Math.floor(data[i].data[key]['close'])\n      data[i][key] = data[i].data[key]['close'];\n\n      // line Data List\n      // lineDataList.push({day:data[i]['time'], code: key, breadth:data[i].data[key]['close']})\n    }\n    lineDataList.push({day:data[i]['time'], code: \"TOTAL\", breadth:Math.floor(data[i]['TOTAL'])})\n    dayList.push(data[i]['time'])\n    // totalList.push(data[i]['TOTAL'])\n  }\n\n  // table code list\n  for (var tk in data[0]){\n    if (tk !== \"data\"){\n      codeList.push(tk)\n    }\n  }\n\n  // chart code list\n  for (var ck in data[0].data){\n    mv20CodeList.push(ck)\n  }\n  // mv20CodeList.push(\"TOTAL\")\n\n  // mv20 chart data list\n  for ( var j=0; j<CHART_CODE_LIST.length; j++){\n    for ( var n=0;n<data.length; n++){\n      mv20DataList.push([j,n ,data[n][CHART_CODE_LIST[j]]],)\n    }\n  }\n\n  // total List\n  for (var t=0; t< ['TOTAL'].length; t++){\n    for ( var tn=0;tn<data.length; tn++){\n      totalList.push([t,tn ,Math.floor(data[tn]['TOTAL'])],)\n\n    }\n  }\n  lastBreadth = totalList[totalList.length-1][2]\n  highBreadth = Math.floor(data[dayList.length-1]['HIGH_TOTAL'])\n  lowBreadth = Math.floor(data[dayList.length-1]['LOW_TOTAL'])\n  openBreadth = Math.floor(data[dayList.length-1]['OPEN_TOTAL'])\n\n  const mv20source = mv20DataList.map((arr) => {\n    return {\n      name: arr[0],\n      day: arr[1],\n      sales: arr[2],\n    };\n  });\n  const mv20TotalSource = totalList.map((arr) => {\n    return {\n      name: arr[0],\n      day: arr[1],\n      sales: arr[2],\n    };\n  });\n\n  return {\n    type: constants.INIT_DATA_LIST,\n    dataList: data,\n    totalList: mv20TotalSource,\n    dayList: dayList,\n    codeList: codeList,\n    mv20DataList: mv20source,\n    isLoading: false,\n    lastBreadth: lastBreadth,\n    lastTime: srcData.last_time,\n    lineDataList: lineDataList,\n    highBreadth: highBreadth,\n    lowBreadth: lowBreadth,\n    openBreadth: openBreadth,\n  }};\n\n\nexport const changeCurrentZoom = (value) => ({\n  type: constants.CHANGE_CURRENT_ZOOM,\n  value,\n})\n\n// 使用了 redux-thunk 之后 返回可以是一个函数\nexport const getMtData = () => {\n  return (dispatch) => { // dispatch: 如果action是函数的话会自动接收到dispatch方法\n    // ajax request\n    var t = \"?t=\" + Date.parse(new Date()) / 1000\n    var url = window.location.href\n    var header = {'Cache-Control': 'no-cache'}\n    axios.get(url + \"us/sp500_100.json\" + t, header).then((res) => {\n      dispatch(InitDataList(res.data)) // action change store\n      }).catch(() => { // ajax request error\n        console.log(\"error\")\n    })\n  }\n}","import React from \"react\";\nimport {\n  Chart,\n  Tooltip,\n  Legend,\n  Axis,\n  Interaction,\n  Polygon,\n  Line,\n  Point,\n} from 'bizcharts';\n\n\nconst LeftChart = (props) => {\n  const scale = {\n    name: {\n      type: 'cat',\n      // values: ['SPX','COM','CND','CNS','ENE','FIN','HLT','IND','MAT','REI','TEC','UTL','TOTAL'],\n      values: ['SPX', 'COM', 'CND', 'CNS', 'ENE', 'FIN', 'HLT', 'IND', 'MAT', 'REI', 'TEC', 'UTL'],\n    },\n    day: {\n      type: 'cat',\n      values: props.days || [],\n    },\n    sales: {\n      nice: true,\n    }\n  };\n\n  return <Chart\n    scale={scale}\n    height={3000}\n    data={props.data}\n    autoFit\n    forceFit={true}\n  >\n\n    <Axis\n      name={'name'}\n      position='top'\n\n      tickLine={null}\n      grid={{\n        alignTick: false,\n        line: {\n          style: {\n            lineWidth: 1,\n            lineDash: null,\n            stroke: '#f0f0f0',\n          },\n        },\n      }}\n    />\n    <Axis\n      name={'day'}\n      title={null}\n      grid={{\n        alignTick: false,\n        line: {\n          style: {\n            lineWidth: 1,\n            lineDash: null,\n            stroke: '#f0f0f0',\n          },\n        },\n      }}\n    />\n    <Legend position='left-top' offsetY={100}/>\n\n    <Tooltip shared showMarkers={false}/>\n    <Polygon\n      position={'name*day'}\n      // color={['sales', '#BAE7FF-#1890FF-#0050B3']}\n      color={['sales', '#FB5050-#FFFFFF-#009966']}\n      label={['sales', {\n        offset: -2,\n        style: {\n          fill: '#2E2E2E',\n          shadowBlur: 50,\n          shadowColor: 'rgba(0, 0, 0, .45)',\n        },\n      }]}\n      // style={{\n      //   lineWidth: 0,\n      //   stroke: '#fff',\n      // }}\n    >\n\n    </Polygon>\n    <Interaction type={'element-active'}/>\n  </Chart>\n}\n\n\nconst RightChart = (props) => {\n  const scale = {\n    name: {\n      type: 'cat',\n      values: ['TOTAL'],\n    },\n    day: {\n      type: 'cat',\n      values: props.days || [],\n    },\n    sales: {\n      nice: true,\n    }\n  };\n\n  return <Chart\n    scale={scale}\n    height={3000}\n    data={props.data}\n    autoFit\n    forceFit={true}\n  >\n\n    <Axis\n      name={'name'}\n      position='top'\n\n      tickLine={null}\n      grid={{\n        alignTick: false,\n        line: {\n          style: {\n            lineWidth: 1,\n            lineDash: null,\n            stroke: '#f0f0f0',\n          },\n        },\n      }}\n    />\n    <Axis\n      name={'day'}\n      title={null}\n      visible={false}\n      grid={{\n        alignTick: false,\n        line: {\n          style: {\n            lineWidth: 1,\n            lineDash: null,\n            stroke: '#f0f0f0',\n          },\n        },\n      }}\n    />\n    <Tooltip shared showMarkers={false}/>\n    <Legend position='right-top' offsetY={100}/>\n    <Polygon\n      position={'name*day'}\n      color={['sales', '#FB5050-#FFFFFF-#009966']}\n      label={['sales', {\n        offset: -2,\n        style: {\n          fill: '#2E2E2E',\n          shadowBlur: 50,\n          shadowColor: 'rgba(0, 0, 0, .45)',\n        },\n      }]}\n      // style={{\n      //   lineWidth: 0,\n      //   stroke: '#fff',\n      // }}\n    >\n\n    </Polygon>\n    <Interaction type={'element-active'}/>\n  </Chart>\n}\n\nconst LineChart = (props) => {\n  const styles ={\n    mainTitle:{\n      fontSize:20,\n      color:\"black\",\n      textAlign:\"center\"\n    },\n    subTitle:{\n      fontSize:16,\n      color:\"gray\",\n      textAlign:\"center\"\n    }\n  }\n\n  return <div>\n    <h5 className='sub-title' style={styles.subTitle}>\n      S&P 500 总宽度走势\n    </h5>\n    <Chart scale={{breadth: {min: 0}}} padding={[10, 20, 50, 40]} autoFit height={300} data={props.data}>\n\n      <Line shape=\"line\" position=\"day*breadth\" color=\"\"/>\n      <Point position=\"day*breadth\" color=\"\"/>\n      <Tooltip shared={false} showCrosshairs/>\n    </Chart>\n  </div>\n}\n\n\nexport {LeftChart, RightChart, LineChart};\n","import React, {Component} from 'react';\nimport {Row, Col, Tooltip} from 'antd';\nimport {connect} from \"react-redux\"\n\nimport {Layout, Statistic, Menu, Button, Space, Alert, Descriptions, message } from 'antd';\n\nimport {getMtData,} from \"./store/actionCreators\";\nimport {LeftChart, RightChart, LineChart} from \"./chart\";\nimport {IS_LOADING_STRING, PAYPAL_URL} from \"../constants\";\n\n\nclass SP500 extends Component {\n  constructor(props) {\n    super(props);\n    if (typeof window === 'object') this.fetchData();\n  }\n\n  async fetchData() {\n    await this.props.initData();\n  }\n\n  render() {\n    const {Header, Footer} = Layout;\n\n    const {\n      dataList, totalList, codeList, dayList, // eslint-disable-line no-unused-vars\n      mv20CodeList, mv20DataList, lineDataList, // eslint-disable-line no-unused-vars\n      isLoading, lastBreadth, lastTime, // eslint-disable-line no-unused-vars\n      highBreadth, lowBreadth, openBreadth, // eslint-disable-line no-unused-vars\n    } = this.props // eslint-disable-line no-unused-vars\n\n    const lastTimeText = \"最后更新时间: \" + lastTime\n\n    return (\n      <Layout>\n        <Header className=\"header\">\n          <Menu theme=\"dark\" mode=\"horizontal\" defaultSelectedKeys={['2']}>\n            <Menu.Item key=\"1\">Market Breadth</Menu.Item>\n          </Menu>\n        </Header>\n        <Row justify=\"center\" align=\"top\">\n          <Col xs={{span: 24}} sm={{span: 19}} md={{span: 20}} lg={{span: 16}} xl={{span: 16}} align=\"top\">\n            <Alert message={lastTimeText} type=\"info\"   banner/>\n          </Col>\n        </Row>\n\n        <Row gutter={[9, 9]} justify=\"center\" style={{padding: '12px 0'}}>\n          <Col xs={{span: 7, offset: 1}} sm={{span: 7, offset: 1}} md={{span: 10, offset: 1}} lg={{span: 6, offset: 5}}\n               xl={{span: 6, offset: 5}}>\n            {\n              isLoading\n                ? <div>{IS_LOADING_STRING}</div>\n                : <Statistic title=\"Market Breadth\" value={lastBreadth}/>\n            }\n\n            <Descriptions title=\"\">\n              <Descriptions.Item label=\"最高\">{highBreadth}</Descriptions.Item>\n              <Descriptions.Item label=\"最低\">{lowBreadth}</Descriptions.Item>\n              <Descriptions.Item label=\"开盘\">{openBreadth}</Descriptions.Item>\n            </Descriptions>\n          </Col>\n          <Col xs={{span: 7, offset: 0}} sm={{span: 7, offset: 1}} md={{span: 10, offset: 1}} lg={{span: 6, offset: 5}}\n               xl={{span: 6, offset: 5}}>\n\n          <Space size={10} direction=\"vertical\">\n              <Tooltip title=\"交易时间延迟1-2小时.\" color='blue' key='blue-text'>\n                <Button type=\"primary\" onClick={() => {\n                  this.props.initData();\n                  message.success('已更新');\n                }}>刷新</Button>\n              </Tooltip>\n\n              <Tooltip title=\"O(∩_∩)O~\" color='red' key='red-text'>\n                <Button danger onClick={() => {\n                  window.open(PAYPAL_URL);\n                }}>支持一下</Button>\n              </Tooltip>\n\n            </Space>\n          </Col>\n        </Row>\n\n        <Row justify=\"center\" align=\"top\">\n          <Col xs={{span: 20}} sm={{span: 19}} md={{span: 20}} lg={{span: 16}} xl={{span: 16}} align=\"top\">\n            {\n              isLoading\n                ? <div>{IS_LOADING_STRING}</div>\n                : <LineChart data={lineDataList}/>\n            }\n          </Col>\n        </Row>\n        <Row justify=\"center\" align=\"top\">\n\n          <Col xs={{span: 0}} sm={{span: 19}} md={{span: 18}} lg={{span: 14}} xl={{span: 14}} align=\"top\">\n            {\n              isLoading\n                ? <div>{IS_LOADING_STRING}</div>\n                : <LeftChart data={mv20DataList} days={dayList}/>\n\n            }\n          </Col>\n\n          <Col xs={{span: 0}} sm={{span: 2}} md={{span: 2}} lg={{span: 2}} xl={{span: 2}} offset={1} align=\"top\">\n            {\n              isLoading\n                ? <div>{IS_LOADING_STRING}</div>\n                : <RightChart data={totalList} days={dayList}/>\n            }\n          </Col>\n        </Row>\n        <Footer style={{textAlign: 'center'}}>Market Breadth ©2020 Created by breadth.app</Footer>\n      </Layout>\n    )\n  }\n\n  componentDidMount() {\n    // this.props.initData();\n\n    this.refreshData = setInterval(() => {\n      this.props.initData();\n    }, 1000 * 60 * 10)\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.refreshData);\n  }\n\n}\n\n// link 规则（方式）映射关系\nconst mapState = (state) => {\n  return {\n    dataList: state.getIn(['sp500', 'dataList']),\n    totalList: state.getIn(['sp500', 'totalList']),\n    codeList: state.getIn(['sp500', 'codeList']),\n    dayList: state.getIn(['sp500', 'dayList']),\n    mv20CodeList: state.getIn(['sp500', 'mv20CodeList']),\n    mv20DataList: state.getIn(['sp500', 'mv20DataList']),\n    isLoading: state.getIn(['sp500', 'isLoading']),\n    lastBreadth: state.getIn(['sp500', 'lastBreadth']),\n    highBreadth: state.getIn(['sp500', 'highBreadth']),\n    lowBreadth: state.getIn(['sp500', 'lowBreadth']),\n    openBreadth: state.getIn(['sp500', 'openBreadth']),\n    lastTime: state.getIn(['sp500', 'lastTime']),\n    lineDataList: state.getIn(['sp500', 'lineDataList']),\n    breadthChartHigh: state.getIn(['sp500', 'breadthChartHigh']),\n  }\n};\n\n// redux 数据修改逻辑映射 store.dispatch, props\nconst mapDispatch = (dispatch) => {\n  return {\n    // load list\n    initData() {\n      dispatch(getMtData())\n    },\n\n  }\n};\n\n// 组件是通过connect获取到state的数据\nexport default connect(mapState, mapDispatch)(SP500)\n","import * as constants from './constants';\nimport { fromJS} from 'immutable';\nimport {CHART_CODE_LIST, IS_LOADING_STRING} from \"../../constants\";\n\nconst defaultState = fromJS({\n  dataList: [],\n  totalLList: [],\n  dayList: [],\n  codeList: [],\n  mv20CodeList: CHART_CODE_LIST,\n  mv20DataList: [],\n  chartList:[],\n  breadthDays: 100,\n  isLoading: true,\n  lastBreadth: 0,\n  lastTime: IS_LOADING_STRING,\n});\n\n\nconst changeCurrentCity = (state, action) => {\n  var result = {\n    \"currentCity\": action.currentCity,\n    \"currentZoom\": action.currentZoom,\n  }\n  return state.merge(result)\n}\n\nconst initDataList = (state, action) => {\n  return state.merge({\n    dataList: action.dataList,\n    totalList: action.totalList,\n    dayList:action.dayList,\n    codeList:action.codeList,\n    mv20CodeList:action.mv20CodeList,\n    mv20DataList:action.mv20DataList,\n    isLoading:action.isLoading,\n    lastBreadth:action.lastBreadth,\n    highBreadth: action.highBreadth,\n    lowBreadth: action.lowBreadth,\n    openBreadth: action.openBreadth,\n    lastTime:action.lastTime,\n    lineDataList:action.lineDataList,\n    breadthChartHigh:action.breadthChartHigh,\n  })\n}\n\n// state    整个DOM的数据库\n// action\n// reducer 可以接收state，但是不可以在修改stacurrentCityte\n\nconst reducer = (state = defaultState, action) => {\n  switch(action.type) {\n    case constants.INIT_DATA_LIST:\n      return initDataList(state, action)\n    case constants.CHANGE_CURRENT_CITY:\n      return changeCurrentCity(state, action)\n    default:\n      return state;\n  }\n}\n\n\n\nexport default reducer;","import { combineReducers } from 'redux-immutable';\nimport { reducer as sp500Reducer } from '../sp500/store';\n\nconst reducer = combineReducers({\n\t// vipmap: vipmapReducer,\n\tsp500: sp500Reducer,\n});\n\nexport default reducer;\n","import {createStore, applyMiddleware, compose} from 'redux';\nimport thunk from 'redux-thunk';\nimport reducer from \"./reducer\";\n\n/*\n  redux-sagas 中间件把异步放到单独的文件进行管理\n  redux-thunk 中间件把异步放到action中\n */\n\n// https://github.com/zalmoxisus/redux-devtools-extension/#12-advanced-store-setup\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}) : compose;\nconst enhancer = composeEnhancers(\n\tapplyMiddleware(thunk),\n\t// other store enhancers if any\n);\n\nconst store = createStore(\n\treducer,\n\tenhancer // redux 中间件\n);\n\nexport default store;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from \"react-redux\"\n\nimport 'antd/dist/antd.css';\n\nimport SP500 from './sp500';\nimport store from \"./store\";\n\nconst App = (\n    <Provider store={store}>\n        <SP500/>\n    </Provider>\n)\n\nReactDOM.render(\n    App,\n    document.getElementById('breadth')\n);\n"],"sourceRoot":""}