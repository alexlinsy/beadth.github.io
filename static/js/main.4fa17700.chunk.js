(this["webpackJsonpmt-site"]=this["webpackJsonpmt-site"]||[]).push([[0],{230:function(t,e,a){"use strict";a.r(e);var s=a(5),n=a(0),i=a(8),r=a.n(i),l=a(68),o=(a(146),a(77)),c=a.n(o),d=a(106),h=a(107),j=a(108),p=a(131),f=a(128),u=a(240),b=a(241),O=a(129),g=a(233),x=a(237),m=a(239),L=a(234),y=a(238),v=a(242),T=a(235),D=a(236),C=a(109),I=a.n(C),B=a(110),w=a.n(B),F="sp500/INIT_DATA_LIST",E="vipmap/CHANGE_CURRENT_CITY",k=["SPX","COM","CND","CNS","ENE","FIN","HLT","IND","MAT","REI","TEC","UTL"],_="Loading..",A=function(){return function(t){var e="?t="+Date.parse(new Date)/1e3,a=window.location.href;I.a.get(a+"us/sp500_100.json"+e,{"Cache-Control":"no-cache"}).then((function(e){t(function(t){for(var e,a,s,n,i=[],r=[],l=[],o=[],c=[],d=[],h=JSON.parse(w.a.decode(t.data)),j=0;j<h.length;j++){for(var p in h[j].data).01===h[j].data[p].close&&(h[j].data[p].close=0),h[j].data[p].close=Math.ceil(h[j].data[p].close),h[j][p]=h[j].data[p].close;d.push({day:h[j].time,code:"TOTAL",breadth:Math.ceil(h[j].TOTAL)}),i.push(h[j].time)}for(var f in h[0])"data"!==f&&r.push(f);for(var u in h[0].data)o.push(u);for(var b=0;b<k.length;b++)for(var O=0;O<h.length;O++)c.push([b,O,h[O][k[b]]]);for(var g=0;g<["TOTAL"].length;g++)for(var x=0;x<h.length;x++)l.push([g,x,Math.ceil(h[x].TOTAL)]);n=l[l.length-1][2],a=Math.ceil(h[i.length-1].HIGH_TOTAL),s=Math.ceil(h[i.length-1].LOW_TOTAL),e=Math.ceil(h[i.length-1].OPEN_TOTAL);var m=c.map((function(t){return{name:t[0],day:t[1],sales:t[2]}})),L=l.map((function(t){return{name:t[0],day:t[1],sales:t[2]}}));return{type:F,dataList:h,totalList:L,dayList:i,codeList:r,mv20DataList:m,isLoading:!1,lastBreadth:n,lastTime:t.last_time,lineDataList:d,highBreadth:a,lowBreadth:s,openBreadth:e}}(e.data))})).catch((function(){console.log("error")}))}},N=a(10),M=function(t){var e={name:{type:"cat",values:["SPX","COM","CND","CNS","ENE","FIN","HLT","IND","MAT","REI","TEC","UTL"]},day:{type:"cat",values:t.days||[]},sales:{nice:!0}};return Object(s.jsxs)(N.Chart,{scale:e,height:3e3,data:t.data,autoFit:!0,forceFit:!0,children:[Object(s.jsx)(N.Axis,{name:"name",position:"top",tickLine:null,grid:{alignTick:!1,line:{style:{lineWidth:1,lineDash:null,stroke:"#f0f0f0"}}}}),Object(s.jsx)(N.Axis,{name:"day",title:null,grid:{alignTick:!1,line:{style:{lineWidth:1,lineDash:null,stroke:"#f0f0f0"}}}}),Object(s.jsx)(N.Legend,{position:"left-top",offsetY:100}),Object(s.jsx)(N.Tooltip,{shared:!0,showMarkers:!1}),Object(s.jsx)(N.Polygon,{position:"name*day",color:["sales","#FB5050-#FFFFFF-#009966"],label:["sales",{offset:-2,style:{fill:"#2E2E2E",shadowBlur:50,shadowColor:"rgba(0, 0, 0, .45)"}}]}),Object(s.jsx)(N.Interaction,{type:"element-active"})]})},S=function(t){var e={name:{type:"cat",values:["TOTAL"]},day:{type:"cat",values:t.days||[]},sales:{nice:!0}};return Object(s.jsxs)(N.Chart,{scale:e,height:3e3,data:t.data,autoFit:!0,forceFit:!0,children:[Object(s.jsx)(N.Axis,{name:"name",position:"top",tickLine:null,grid:{alignTick:!1,line:{style:{lineWidth:1,lineDash:null,stroke:"#f0f0f0"}}}}),Object(s.jsx)(N.Axis,{name:"day",title:null,visible:!1,grid:{alignTick:!1,line:{style:{lineWidth:1,lineDash:null,stroke:"#f0f0f0"}}}}),Object(s.jsx)(N.Tooltip,{shared:!0,showMarkers:!1}),Object(s.jsx)(N.Legend,{position:"right-top",offsetY:100}),Object(s.jsx)(N.Polygon,{position:"name*day",color:["sales","#FB5050-#FFFFFF-#009966"],label:["sales",{offset:-2,style:{fill:"#2E2E2E",shadowBlur:50,shadowColor:"rgba(0, 0, 0, .45)"}}]}),Object(s.jsx)(N.Interaction,{type:"element-active"})]})},H=function(t){return Object(s.jsxs)("div",{children:[Object(s.jsx)("h5",{className:"sub-title",style:{fontSize:16,color:"gray",textAlign:"center"},children:"S&P 500 \u5bbd\u5ea6\u8d70\u52bf"}),Object(s.jsxs)(N.Chart,{scale:{breadth:{min:0,max:1101}},padding:[10,20,50,40],autoFit:!0,height:220,data:t.data,children:[Object(s.jsx)(N.Axis,{name:"breadth",grid:{align:"center",line:null}}),Object(s.jsx)(N.Line,{shape:"line",position:"day*breadth",color:""}),Object(s.jsx)(N.Legend,{visible:!1}),Object(s.jsx)(N.Slider,{start:0,end:1}),Object(s.jsx)(N.Annotation.Line,{start:["min","200"],end:["max","200"],text:{position:"end",content:"\u72e9\u730e\u533a",style:{fill:"#FF4D4F"},offsetX:-20,offsetY:20}}),Object(s.jsx)(N.Annotation.Line,{start:["min","949"],end:["max","949"],text:{position:"end",content:"\u8d70\u8d27\u533a",style:{fill:"#FF4D4F"},offsetX:-20,offsetY:-20}}),Object(s.jsx)(N.Point,{position:"day*breadth",shape:["breadth",function(t){return t<201?"triangle":t>949?"triangle-down":"0"}],color:["breadth",function(t){return t<201||t>949?"#FB5050":""}]})]})]})},P=function(t){Object(p.a)(a,t);var e=Object(f.a)(a);function a(t){var s;return Object(h.a)(this,a),s=e.call(this,t),"object"===typeof window&&s.fetchData(),s}return Object(j.a)(a,[{key:"fetchData",value:function(){var t=Object(d.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.props.initData();case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this,e=g.a.Header,a=g.a.Footer,n=this.props,i=(n.dataList,n.totalList),r=(n.codeList,n.dayList),l=(n.mv20CodeList,n.mv20DataList),o=n.lineDataList,c=n.isLoading,d=n.lastBreadth,h=n.lastTime,j=n.highBreadth,p=n.lowBreadth,f=n.openBreadth,C="\u6700\u540e\u66f4\u65b0\u65f6\u95f4: "+h;return Object(s.jsxs)(g.a,{children:[Object(s.jsx)(e,{className:"header",children:Object(s.jsx)(x.a,{theme:"dark",mode:"horizontal",defaultSelectedKeys:["2"],children:Object(s.jsx)(x.a.Item,{children:"Market Breadth"},"1")})}),Object(s.jsx)(u.a,{justify:"center",align:"top",children:Object(s.jsx)(b.a,{xs:{span:24},sm:{span:19},md:{span:20},lg:{span:16},xl:{span:16},align:"top",children:Object(s.jsx)(m.a,{message:C,type:"info",banner:!0})})}),Object(s.jsxs)(u.a,{gutter:[9,9],justify:"center",style:{padding:"12px 0"},children:[Object(s.jsxs)(b.a,{xs:{span:7,offset:1},sm:{span:7,offset:1},md:{span:10,offset:1},lg:{span:6,offset:5},xl:{span:6,offset:5},children:[c?Object(s.jsx)("div",{children:_}):Object(s.jsx)(L.a,{title:"Market Breadth",value:d}),Object(s.jsxs)(y.a,{title:"",children:[Object(s.jsx)(y.a.Item,{label:"\u6700\u9ad8",children:j}),Object(s.jsx)(y.a.Item,{label:"\u6700\u4f4e",children:p}),Object(s.jsx)(y.a.Item,{label:"\u5f00\u76d8",children:f})]})]}),Object(s.jsx)(b.a,{xs:{span:7,offset:0},sm:{span:7,offset:1},md:{span:10,offset:1},lg:{span:6,offset:5},xl:{span:6,offset:5},children:Object(s.jsxs)(v.b,{size:10,direction:"vertical",children:[Object(s.jsx)(O.a,{title:"\u4ea4\u6613\u65f6\u95f4\u5ef6\u8fdf1-2\u5c0f\u65f6.",color:"blue",children:Object(s.jsx)(T.a,{type:"primary",onClick:function(){t.props.initData(),D.b.success("\u5df2\u66f4\u65b0")},children:"\u5237\u65b0"})},"blue-text"),Object(s.jsx)(O.a,{title:"O(\u2229_\u2229)O~",color:"red",children:Object(s.jsx)(T.a,{danger:!0,onClick:function(){window.open("https://www.paypal.me/kenteb")},children:"\u652f\u6301\u4e00\u4e0b"})},"red-text")]})})]}),Object(s.jsx)(u.a,{justify:"center",align:"top",children:Object(s.jsx)(b.a,{xs:{span:20},sm:{span:19},md:{span:20},lg:{span:16},xl:{span:16},align:"top",children:c?Object(s.jsx)("div",{children:_}):Object(s.jsx)(H,{data:o})})}),Object(s.jsxs)(u.a,{justify:"center",align:"top",children:[Object(s.jsx)(b.a,{xs:{span:0},sm:{span:19},md:{span:18},lg:{span:14},xl:{span:14},align:"top",children:c?Object(s.jsx)("div",{children:_}):Object(s.jsx)(M,{data:l,days:r})}),Object(s.jsx)(b.a,{xs:{span:0},sm:{span:2},md:{span:2},lg:{span:2},xl:{span:2},offset:1,align:"top",children:c?Object(s.jsx)("div",{children:_}):Object(s.jsx)(S,{data:i,days:r})})]}),Object(s.jsx)(a,{style:{textAlign:"center"},children:"Market Breadth \xa92020 Created by breadth.app"})]})}},{key:"componentDidMount",value:function(){var t=this;this.refreshData=setInterval((function(){t.props.initData()}),6e5)}},{key:"componentWillUnmount",value:function(){clearInterval(this.refreshData)}}]),a}(n.Component),X=Object(l.b)((function(t){return{dataList:t.getIn(["sp500","dataList"]),totalList:t.getIn(["sp500","totalList"]),codeList:t.getIn(["sp500","codeList"]),dayList:t.getIn(["sp500","dayList"]),mv20CodeList:t.getIn(["sp500","mv20CodeList"]),mv20DataList:t.getIn(["sp500","mv20DataList"]),isLoading:t.getIn(["sp500","isLoading"]),lastBreadth:t.getIn(["sp500","lastBreadth"]),highBreadth:t.getIn(["sp500","highBreadth"]),lowBreadth:t.getIn(["sp500","lowBreadth"]),openBreadth:t.getIn(["sp500","openBreadth"]),lastTime:t.getIn(["sp500","lastTime"]),lineDataList:t.getIn(["sp500","lineDataList"]),breadthChartHigh:t.getIn(["sp500","breadthChartHigh"])}}),(function(t){return{initData:function(){t(A())}}}))(P),R=a(46),U=a(126),W=a(127),Y=a(55),J=Object(Y.fromJS)({dataList:[],totalLList:[],dayList:[],codeList:[],mv20CodeList:k,mv20DataList:[],chartList:[],breadthDays:100,isLoading:!0,lastBreadth:0,lastTime:_}),z=function(t,e){var a={currentCity:e.currentCity,currentZoom:e.currentZoom};return t.merge(a)},G=function(t,e){return t.merge({dataList:e.dataList,totalList:e.totalList,dayList:e.dayList,codeList:e.codeList,mv20CodeList:e.mv20CodeList,mv20DataList:e.mv20DataList,isLoading:e.isLoading,lastBreadth:e.lastBreadth,highBreadth:e.highBreadth,lowBreadth:e.lowBreadth,openBreadth:e.openBreadth,lastTime:e.lastTime,lineDataList:e.lineDataList,breadthChartHigh:e.breadthChartHigh})},V=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case F:return G(t,e);case E:return z(t,e);default:return t}},Z=Object(W.combineReducers)({sp500:V}),K=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):R.c)(Object(R.a)(U.a)),q=Object(R.d)(Z,K),Q=Object(s.jsx)(l.a,{store:q,children:Object(s.jsx)(X,{})});r.a.render(Q,document.getElementById("breadth"))}},[[230,1,2]]]);
//# sourceMappingURL=main.4fa17700.chunk.js.map