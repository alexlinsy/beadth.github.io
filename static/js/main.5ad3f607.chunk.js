(this["webpackJsonpmt-site"]=this["webpackJsonpmt-site"]||[]).push([[0],{206:function(t,e,a){"use strict";a.r(e);var s=a(5),n=a(0),i=a(9),r=a.n(i),o=a(66),c=(a(137),a(75)),l=a.n(c),d=a(106),p=a(45),h=a(46),u=a(50),f=a(49),j=a(211),b=a(212),O=a(207),L=a(209),v=a(208),m=a(213),y=a(210),g=a(107),x=a.n(g),C=a(108),D=a.n(C),T="sp500/INIT_DATA_LIST",k="vipmap/CHANGE_CURRENT_CITY",E=["SPX","COM","CND","CNS","ENE","FIN","HLT","IND","MAT","REI","TEC","UTL"],I=function(){return function(t){var e="?t="+Date.parse(new Date)/1e3,a=window.location.href;x.a.get(a+"us/sp500_100.json"+e,{"Cache-Control":"no-cache"}).then((function(e){var a=D.a.decode(e.data.data);t(function(t){for(var e,a=[],s=[],n=[],i=[],r=[],o=0;o<t.length;o++){for(var c in t[o].data)t[o][c]=t[o].data[c].close;a.push(t[o].time)}for(var l in t[0])"data"!==l&&s.push(l);for(var d in t[0].data)i.push(d);for(var p=0;p<E.length;p++)for(var h=0;h<t.length;h++)r.push([p,h,t[h][E[p]]]);for(var u=0;u<["TOTAL"].length;u++)for(var f=0;f<t.length;f++)n.push([u,f,t[f].TOTAL]);e=n[n.length-1][2];var j=r.map((function(t){return{name:t[0],day:t[1],sales:t[2]}})),b=n.map((function(t){return{name:t[0],day:t[1],sales:t[2]}}));return{type:T,dataList:t,totalList:b,dayList:a,codeList:s,mv20DataList:j,isLoading:!1,lastBreadth:e}}(JSON.parse(a)))})).catch((function(){console.log("error")}))}},w=a(122),F=a(35),N=a(23),_=function(t){Object(u.a)(a,t);var e=Object(f.a)(a);function a(t){var s;return Object(p.a)(this,a),(s=e.call(this,t)).props=t,s}return Object(h.a)(a,[{key:"render",value:function(){var t={name:{type:"cat",values:["SPX","COM","CND","CNS","ENE","FIN","HLT","IND","MAT","REI","TEC","UTL"]},day:{type:"cat",values:this.props.days||[]},sales:{nice:!0}};return Object(s.jsx)("div",{children:Object(s.jsxs)(N.Chart,{scale:t,height:3e3,data:this.props.data,autoFit:!0,forceFit:!0,children:[Object(s.jsx)(N.Axis,{name:"name",position:"top",tickLine:null,grid:{alignTick:!1,line:{style:{lineWidth:1,lineDash:null,stroke:"#f0f0f0"}}}}),Object(s.jsx)(N.Axis,{name:"day",title:null,grid:{alignTick:!1,line:{style:{lineWidth:1,lineDash:null,stroke:"#f0f0f0"}}}}),Object(s.jsx)(N.Legend,{position:"left-top",offsetY:100}),Object(s.jsx)(N.Tooltip,{shared:!0,showMarkers:!1}),Object(s.jsx)(N.Polygon,{position:"name*day",color:["sales","#FB5050-#FFFFFF-#009966"],label:["sales",{offset:-2,style:{fill:"#2E2E2E",shadowBlur:50,shadowColor:"rgba(0, 0, 0, .45)"}}]}),Object(s.jsx)(N.Interaction,{type:"element-active"})]})})}}]),a}(n.Component),B=function(t){Object(u.a)(a,t);var e=Object(f.a)(a);function a(t){var s;return Object(p.a)(this,a),(s=e.call(this,t)).props=t,s}return Object(h.a)(a,[{key:"render",value:function(){var t={name:{type:"cat",values:["TOTAL"]},day:{type:"cat",values:this.props.days||[]},sales:{nice:!0}};return Object(s.jsx)("div",{children:Object(s.jsxs)(N.Chart,{scale:t,height:3e3,data:this.props.data,autoFit:!0,forceFit:!0,children:[Object(s.jsx)(N.Axis,{name:"name",position:"top",tickLine:null,grid:{alignTick:!1,line:{style:{lineWidth:1,lineDash:null,stroke:"#f0f0f0"}}}}),Object(s.jsx)(N.Axis,{name:"day",title:null,visible:!1,grid:{alignTick:!1,line:{style:{lineWidth:1,lineDash:null,stroke:"#f0f0f0"}}}}),Object(s.jsx)(N.Tooltip,{shared:!0,showMarkers:!1}),Object(s.jsx)(N.Legend,{position:"right-top",offsetY:100}),Object(s.jsx)(N.Polygon,{position:"name*day",color:["sales","#FB5050-#FFFFFF-#009966"],label:["sales",{offset:-2,style:{fill:"#2E2E2E",shadowBlur:50,shadowColor:"rgba(0, 0, 0, .45)"}}]}),Object(s.jsx)(N.Interaction,{type:"element-active"})]})})}}]),a}(n.Component),S=(n.Component,function(t){Object(u.a)(a,t);var e=Object(f.a)(a);function a(t){var s;return Object(p.a)(this,a),s=e.call(this,t),"object"===typeof window&&s.fetchData(),s}return Object(h.a)(a,[{key:"fetchData",value:function(){var t=Object(d.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.props.initData();case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this,e=O.a.Header,a=O.a.Footer,n=this.props,i=(n.dataList,n.totalList),r=(n.codeList,n.dayList),o=(n.mv20CodeList,n.mv20DataList),c=n.isLoading,l=n.lastBreadth;return Object(s.jsxs)(O.a,{children:[Object(s.jsx)(e,{className:"header",children:Object(s.jsx)(L.a,{theme:"dark",mode:"horizontal",defaultSelectedKeys:["2"],children:Object(s.jsx)(L.a.Item,{children:"Market Breadth"},"1")})}),Object(s.jsxs)(j.a,{justify:"center",style:{padding:"12px 0"},children:[Object(s.jsx)(b.a,{xs:{span:7,offset:1},sm:{span:8,offset:5},md:{span:10,offset:3},lg:{span:6,offset:5},xl:{span:6,offset:5},children:c?Object(s.jsx)("div",{children:"Loading"}):Object(s.jsx)(v.a,{title:"Last Breadth Value",value:l})}),Object(s.jsx)(b.a,{xs:{span:5,offset:0},sm:{span:5,offset:0},md:{span:10,offset:0},lg:{span:6,offset:0},xl:{span:6,offset:0},children:Object(s.jsxs)(m.b,{size:10,direction:"vertical",children:[Object(s.jsx)(y.a,{type:"primary",onClick:function(){t.props.initData()},children:"\u5237\u65b0"}),Object(s.jsx)(y.a,{danger:!0,onClick:function(){window.open("https://www.paypal.me/kenteb")},children:"\u652f\u6301\u4e00\u4e0b"})]})})]}),Object(s.jsxs)(j.a,{justify:"center",children:[Object(s.jsx)(b.a,{xs:{span:20},sm:{span:19},md:{span:18},lg:{span:14},xl:{span:14},children:c?Object(s.jsx)("div",{children:"Loading"}):Object(s.jsx)(_,{data:o,days:r})}),Object(s.jsx)(b.a,{xs:{span:3},sm:{span:3},md:{span:2},lg:{span:2},xl:{span:2},offset:1,children:c?Object(s.jsx)("div",{children:"Loading"}):Object(s.jsx)(B,{data:i,days:r})})]}),Object(s.jsx)(a,{style:{textAlign:"center"},children:"Market Breadth \xa92020 Created by breadth.app"})]})}},{key:"componentDidMount",value:function(){var t=this;this.refreshData=setInterval((function(){t.props.initData()}),6e5)}},{key:"componentWillUnmount",value:function(){clearInterval(this.refreshData)}}]),a}(n.Component)),A=Object(o.b)((function(t){return{dataList:t.getIn(["sp500","dataList"]),totalList:t.getIn(["sp500","totalList"]),codeList:t.getIn(["sp500","codeList"]),dayList:t.getIn(["sp500","dayList"]),mv20CodeList:t.getIn(["sp500","mv20CodeList"]),mv20DataList:t.getIn(["sp500","mv20DataList"]),isLoading:t.getIn(["sp500","isLoading"]),lastBreadth:t.getIn(["sp500","lastBreadth"])}}),(function(t){return{initData:function(){t(I())}}}))(S),M=a(44),R=a(119),P=a(120),U=a(57),X=Object(U.fromJS)({dataList:[],totalLList:[],dayList:[],codeList:[],mv20CodeList:E,mv20DataList:[],chartList:[],breadthDays:100,isLoading:!0,lastBreadth:0}),W=function(t,e){var a={currentCity:e.currentCity,currentZoom:e.currentZoom};return t.merge(a)},H=function(t,e){return t.merge({dataList:e.dataList,totalList:e.totalList,dayList:e.dayList,codeList:e.codeList,mv20CodeList:e.mv20CodeList,mv20DataList:e.mv20DataList,isLoading:e.isLoading,lastBreadth:e.lastBreadth})},J=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case T:return H(t,e);case k:return W(t,e);default:return t}},V=Object(P.combineReducers)({sp500:J}),Y=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):M.c)(Object(M.a)(R.a)),z=Object(M.d)(V,Y),Z=Object(s.jsx)(o.a,{store:z,children:Object(s.jsx)(A,{})});r.a.render(Z,document.getElementById("breadth"))}},[[206,1,2]]]);
//# sourceMappingURL=main.5ad3f607.chunk.js.map