{"version":3,"sources":["sp500/store/constants.js","constants.js","sp500/store/actionCreators.js","sp500/chart.js","sp500/index.js","sp500/store/reducer.js","store/reducer.js","store/index.js","index.js"],"names":["INIT_DATA_LIST","CHANGE_CURRENT_CITY","CHART_CODE_LIST","IS_LOADING_STRING","getMtData","dispatch","t","Date","parse","url","window","location","href","axios","get","then","res","srcData","console","log","lastBreadth","dayList","codeList","totalList","mv20CodeList","mv20DataList","data","JSON","Base64","decode","i","length","key","push","tk","ck","j","n","tn","mv20source","map","arr","name","day","sales","mv20TotalSource","type","constants","dataList","isLoading","lastTime","last_time","InitDataList","catch","LeftChart","props","scale","values","this","days","nice","height","autoFit","forceFit","position","tickLine","grid","alignTick","line","style","lineWidth","lineDash","stroke","title","offsetY","shared","showMarkers","color","label","offset","fill","shadowBlur","shadowColor","Component","RightChart","visible","SP500","fetchData","initData","Header","Layout","Footer","lastTimeText","className","theme","mode","defaultSelectedKeys","Item","justify","padding","xs","span","sm","md","lg","xl","value","size","direction","onClick","danger","open","align","textAlign","refreshData","setInterval","clearInterval","connect","state","getIn","defaultState","fromJS","totalLList","chartList","breadthDays","changeCurrentCity","action","result","currentCity","currentZoom","merge","initDataList","reducer","combineReducers","sp500","sp500Reducer","enhancer","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","applyMiddleware","thunk","store","createStore","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.50373fd5.chunk.js","sourcesContent":["\nexport const INIT_DATA_LIST = 'sp500/INIT_DATA_LIST';\nexport const CHANGE_CURRENT_CITY = 'vipmap/CHANGE_CURRENT_CITY';\nexport const CHANGE_CURRENT_ZOOM = 'vipmap/CHANGE_CURRENT_ZOOM';","export const CHART_CODE_LIST = ['SPX','COM','CND','CNS','ENE','FIN','HLT','IND','MAT','REI','TEC','UTL']\nexport const ALL_CHART_SP500_LIST =  ['SPX','COM','CND','CNS','ENE','FIN','HLT','IND','MAT','REI','TEC','UTL','TOTAL']\nexport const PAYPAL_URL = 'https://www.paypal.me/kenteb';\nexport const IS_LOADING_STRING = \"Loading..\"","import axios from \"axios\"\nimport Base64  from 'base-64';\nimport * as constants from './constants';\nimport {CHART_CODE_LIST} from \"../../constants\";\n\nexport const changeCurrentCity = (city, zoom) => ({\n  type: constants.CHANGE_CURRENT_CITY,\n  currentCity: city,\n  currentZoom: zoom,\n})\n\nexport const InitDataList = (srcData) => {\n  console.log(srcData)\n  // 数据处理\n  var dayList = [];\n  var codeList = [];\n  var totalList = [];\n  var mv20CodeList = [];\n  var mv20DataList = [];\n  var lastBreadth = 0;\n  var data = JSON.parse(Base64.decode(srcData.data))\n\n  for ( var i=0; i<data.length; i++){\n    for (var key in data[i].data){\n      data[i][key] = data[i].data[key]['close'];\n    }\n    dayList.push(data[i]['time'])\n    // totalList.push(data[i]['TOTAL'])\n  }\n\n  // table code list\n  for (var tk in data[0]){\n    if (tk !== \"data\"){\n      codeList.push(tk)\n    }\n  }\n\n  // chart code list\n  for (var ck in data[0].data){\n    mv20CodeList.push(ck)\n  }\n  // mv20CodeList.push(\"TOTAL\")\n\n  // mv20 chart data list\n  for ( var j=0; j<CHART_CODE_LIST.length; j++){\n    for ( var n=0;n<data.length; n++){\n      mv20DataList.push([j,n ,data[n][CHART_CODE_LIST[j]]],)\n    }\n  }\n\n  // total List\n  for (var t=0; t< ['TOTAL'].length; t++){\n    for ( var tn=0;tn<data.length; tn++){\n      totalList.push([t,tn ,data[tn]['TOTAL']],)\n\n    }\n  }\n  lastBreadth = totalList[totalList.length-1][2]\n\n  const mv20source = mv20DataList.map((arr) => {\n    return {\n      name: arr[0],\n      day: arr[1],\n      sales: arr[2],\n    };\n  });\n  const mv20TotalSource = totalList.map((arr) => {\n    return {\n      name: arr[0],\n      day: arr[1],\n      sales: arr[2],\n    };\n  });\n\n  return {\n    type: constants.INIT_DATA_LIST,\n    dataList: data,\n    totalList: mv20TotalSource,\n    dayList: dayList,\n    codeList: codeList,\n    mv20DataList: mv20source,\n    isLoading: false,\n    lastBreadth: lastBreadth,\n    lastTime: srcData.last_time,\n  }};\n\n\n\nexport const changeCurrentZoom = (value) => ({\n  type: constants.CHANGE_CURRENT_ZOOM,\n  value,\n})\n\n// 使用了 redux-thunk 之后 返回可以是一个函数\nexport const getMtData = () => {\n  return (dispatch) => { // dispatch: 如果action是函数的话会自动接收到dispatch方法\n    // ajax request\n    var t = \"?t=\" + Date.parse(new Date()) / 1000\n    var url = window.location.href\n    var header = {'Cache-Control': 'no-cache'}\n    axios.get(url + \"us/sp500_100.json\" + t, header).then((res) => {\n      dispatch(InitDataList(res.data)) // action change store\n      }).catch(() => { // ajax request error\n        console.log(\"error\")\n    })\n  }\n}","import React, {Component} from \"react\";\nimport {\n  Chart,\n  Tooltip,\n  Legend,\n  Axis,\n  Interaction,\n  Polygon\n} from 'bizcharts';\n\n\n// const LeftChart = (props) =>  {\n// const LeftChart = (props) => {\nclass LeftChart extends Component {\n\n  constructor(props) {\n    super(props);\n    this.props = props\n  }\n\n\n  render() {\n    const scale = {\n      name: {\n        type: 'cat',\n        // values: ['SPX','COM','CND','CNS','ENE','FIN','HLT','IND','MAT','REI','TEC','UTL','TOTAL'],\n        values: ['SPX','COM','CND','CNS','ENE','FIN','HLT','IND','MAT','REI','TEC','UTL'],\n      },\n      day: {\n        type: 'cat',\n        values: this.props.days || [],\n      },\n      sales: {\n        nice: true,\n      }\n    };\n\n    return (\n      <div>\n        <Chart\n          scale={scale}\n          height={3000}\n          data={this.props.data}\n          autoFit\n          forceFit={true}\n        >\n\n          <Axis\n            name={'name'}\n            position='top'\n\n            tickLine={null}\n            grid={{\n              alignTick: false,\n              line: {\n                style: {\n                  lineWidth: 1,\n                  lineDash: null,\n                  stroke: '#f0f0f0',\n                },\n              },\n            }}\n          />\n          <Axis\n            name={'day'}\n            title={null}\n            grid={{\n              alignTick: false,\n              line: {\n                style: {\n                  lineWidth: 1,\n                  lineDash: null,\n                  stroke: '#f0f0f0',\n                },\n              },\n            }}\n          />\n          <Legend position='left-top' offsetY={100}/>\n\n          <Tooltip shared showMarkers={false}/>\n          <Polygon\n            position={'name*day'}\n            // color={['sales', '#BAE7FF-#1890FF-#0050B3']}\n            color={['sales', '#FB5050-#FFFFFF-#009966']}\n            label={['sales', {\n              offset: -2,\n              style: {\n                fill: '#2E2E2E',\n                shadowBlur: 50,\n                shadowColor: 'rgba(0, 0, 0, .45)',\n              },\n            }]}\n            // style={{\n            //   lineWidth: 0,\n            //   stroke: '#fff',\n            // }}\n          >\n\n          </Polygon>\n          <Interaction type={'element-active'}/>\n        </Chart>\n      </div>\n    )\n  }\n\n}\n\n\nclass RightChart extends Component {\n  constructor(props) {\n    super(props);\n    this.props = props\n  }\n\n\n  render() {\n    const scale = {\n      name: {\n        type: 'cat',\n        values: ['TOTAL'],\n      },\n      day: {\n        type: 'cat',\n        values: this.props.days || [],\n      },\n      sales: {\n        nice: true,\n      }\n    };\n\n    return (\n      <div>\n        <Chart\n          scale={scale}\n          height={3000}\n          data={this.props.data}\n          autoFit\n          forceFit={true}\n        >\n\n          <Axis\n            name={'name'}\n            position='top'\n\n            tickLine={null}\n            grid={{\n              alignTick: false,\n              line: {\n                style: {\n                  lineWidth: 1,\n                  lineDash: null,\n                  stroke: '#f0f0f0',\n                },\n              },\n            }}\n          />\n          <Axis\n            name={'day'}\n            title={null}\n            visible={false}\n            grid={{\n              alignTick: false,\n              line: {\n                style: {\n                  lineWidth: 1,\n                  lineDash: null,\n                  stroke: '#f0f0f0',\n                },\n              },\n            }}\n          />\n          <Tooltip shared showMarkers={false}/>\n          <Legend position='right-top' offsetY={100}/>\n          <Polygon\n            position={'name*day'}\n            // color={['sales', '#BAE7FF-#1890FF-#0050B3']}\n            color={['sales', '#FB5050-#FFFFFF-#009966']}\n            label={['sales', {\n              offset: -2,\n              style: {\n                fill: '#2E2E2E',\n                shadowBlur: 50,\n                shadowColor: 'rgba(0, 0, 0, .45)',\n              },\n            }]}\n            // style={{\n            //   lineWidth: 0,\n            //   stroke: '#fff',\n            // }}\n          >\n\n          </Polygon>\n          <Interaction type={'element-active'}/>\n        </Chart>\n      </div>\n    )\n  }\n}\n\n\nclass MobileChart extends Component {\n  render() {\n    return super.render();\n  }\n}\n\n\nexport  {LeftChart, RightChart, MobileChart};\n","import React, {Component} from 'react';\nimport {Row, Col, Tooltip} from 'antd';\nimport {connect} from \"react-redux\"\n\nimport {Layout, Statistic, Menu, Button, Space} from 'antd';\n\nimport {getMtData,} from \"./store/actionCreators\";\nimport {LeftChart, RightChart} from \"./chart\";\nimport {IS_LOADING_STRING, PAYPAL_URL} from \"../constants\";\n\n\nclass SP500 extends Component {\n  constructor(props) {\n    super(props);\n    if (typeof window === 'object') this.fetchData();\n  }\n\n  async fetchData() {\n    await this.props.initData();\n  }\n\n  render() {\n    const {Header, Footer} = Layout;\n    const {dataList, totalList, codeList, dayList, mv20CodeList, mv20DataList, isLoading, lastBreadth, lastTime} = this.props // eslint-disable-line no-unused-vars\n    const lastTimeText = \"Last Breadth Value : \"+lastTime\n      return (\n      <Layout>\n        <Header className=\"header\">\n          <Menu theme=\"dark\" mode=\"horizontal\" defaultSelectedKeys={['2']}>\n            <Menu.Item key=\"1\">Market Breadth</Menu.Item>\n          </Menu>\n        </Header>\n        <Row justify=\"center\" style={{padding: '12px 0'}}>\n          <Col xs={{span: 7, offset: 1}} sm={{span: 8, offset: 5}} md={{span: 10, offset: 3}} lg={{span: 6, offset: 5}}\n               xl={{span: 6, offset: 5}}>\n            {\n              isLoading\n                ? <div>{IS_LOADING_STRING}</div>\n                : <Statistic title={lastTimeText} value={lastBreadth}/>}\n          </Col>\n          <Col xs={{span: 5, offset: 0}} sm={{span: 5, offset: 0}} md={{span: 10, offset: 0}} lg={{span: 6, offset: 0}}\n               xl={{span: 6, offset: 0}}>\n\n\n            <Space size={10} direction=\"vertical\">\n              <Tooltip title=\"交易时间延迟1-2小时.\" color='blue' key='blue-text'>\n                <Button type=\"primary\" onClick={() => {\n                  this.props.initData();\n                }}>刷新</Button>\n              </Tooltip>\n\n              <Tooltip title=\"O(∩_∩)O~\" color='red' key='red-text'>\n                <Button danger onClick={() => {\n                  window.open(PAYPAL_URL);\n                }}>支持一下</Button>\n              </Tooltip>\n\n            </Space>\n\n          </Col>\n        </Row>\n        <Row justify=\"center\" align=\"top\">\n\n          <Col xs={{span: 20}} sm={{span: 19}} md={{span: 18}} lg={{span: 14}} xl={{span: 14}} align=\"top\">\n            {\n              isLoading\n                ? <div>{IS_LOADING_STRING}</div>\n                : <LeftChart data={mv20DataList} days={dayList}/>\n\n            }\n\n            {/*<Table columns={columns} dataSource={props.dataList} size=\"middle\" pagination={false} responsive=\"lg\">*/}\n            {/*</Table>*/}\n          </Col>\n          <Col xs={{span: 3}} sm={{span: 3}} md={{span: 2}} lg={{span: 2}} xl={{span: 2}} offset={1} align=\"top\">\n            {\n              isLoading\n                ? <div>{IS_LOADING_STRING}</div>\n                : <RightChart data={totalList} days={dayList}/>\n\n            }\n\n          </Col>\n        </Row>\n        <Footer style={{textAlign: 'center'}}>Market Breadth ©2020 Created by breadth.app</Footer>\n      </Layout>\n    )\n  }\n\n  componentDidMount() {\n    // this.props.initData();\n\n    this.refreshData = setInterval(() => {\n      this.props.initData();\n    }, 1000 * 60 * 10)\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.refreshData);\n  }\n\n}\n\n\nconst SP500UI = (props) => { // eslint-disable-line no-unused-vars\n  const {Header, Footer} = Layout;\n  // const style1 = {background: '#0092ff', padding: '0 0'};\n  const style2 = {background: '#FF0000', padding: '0 0'};\n\n  const columns = [ // eslint-disable-line no-unused-vars\n    {title: 'TIME', dataIndex: 'time',},\n    {title: 'SPX', dataIndex: 'SPX',},\n    {title: 'COM', dataIndex: 'COM',},\n    {title: 'CND', dataIndex: 'CND',},\n    {title: 'CNS', dataIndex: 'CNS',},\n    {title: 'ENE', dataIndex: 'ENE',},\n    {title: 'FIN', dataIndex: 'FIN',},\n    {title: 'HLT', dataIndex: 'HLT',},\n    {title: 'IND', dataIndex: 'IND',},\n    {title: 'MAT', dataIndex: 'MAT',},\n    {title: 'REI', dataIndex: 'REI',},\n    {title: 'TEC', dataIndex: 'TEC',},\n    {title: 'UTL', dataIndex: 'UTL',},\n    {title: 'TOTAL', dataIndex: 'TOTAL',},\n  ]\n  return (\n\n    <Layout>\n      <Header className=\"header\">\n        <Menu theme=\"dark\" mode=\"horizontal\" defaultSelectedKeys={['2']}>\n          <Menu.Item key=\"1\">Market Breadth</Menu.Item>\n        </Menu>\n      </Header>\n      <Row justify=\"center\">\n        <Col style={style2} xs={{span: 20}} sm={{span: 20}} md={{span: 20}} lg={{span: 17}} xl={{span: 17}}>\n          <div>\n          </div>\n          {/*<CHART*/}\n          {/*  dataList={props.dataList}*/}\n          {/*  totalList={props.totalList}*/}\n          {/*  daylList={props.dayList}*/}\n          {/*  codeList={props.codeList}*/}\n          {/*  mv20DataList={props.mv20DataList}*/}\n          {/*  mv20CodeList={props.mv20CodeList}*/}\n          {/*/>*/}\n\n          {/*<Table columns={columns} dataSource={props.dataList} size=\"middle\" pagination={false} responsive=\"lg\">*/}\n          {/*</Table>*/}\n        </Col>\n        {/*<Col style={style1} xs={{span: 4}} sm={{span: 4}} md={{span: 4}} lg={{span: 4}} xl={{span: 4}}>*/}\n\n\n        {/*</Col>*/}\n      </Row>\n      <Footer style={{textAlign: 'center'}}>Market Breadth ©2020 Created by Market Breadth</Footer>\n    </Layout>\n\n  )\n\n}\n\n// link 规则（方式）映射关系\nconst mapState = (state) => {\n  return {\n    dataList: state.getIn(['sp500', 'dataList']),\n    totalList: state.getIn(['sp500', 'totalList']),\n    codeList: state.getIn(['sp500', 'codeList']),\n    dayList: state.getIn(['sp500', 'dayList']),\n    mv20CodeList: state.getIn(['sp500', 'mv20CodeList']),\n    mv20DataList: state.getIn(['sp500', 'mv20DataList']),\n    isLoading: state.getIn(['sp500', 'isLoading']),\n    lastBreadth: state.getIn(['sp500', 'lastBreadth']),\n    lastTime: state.getIn(['sp500', 'lastTime']),\n  }\n};\n\n// redux 数据修改逻辑映射 store.dispatch, props\nconst mapDispatch = (dispatch) => {\n  return {\n    // load list\n    initData() {\n      dispatch(getMtData())\n    },\n\n  }\n};\n\n// 组件是通过connect获取到state的数据\nexport default connect(mapState, mapDispatch)(SP500)\n","import * as constants from './constants';\nimport { fromJS} from 'immutable';\nimport {CHART_CODE_LIST, IS_LOADING_STRING} from \"../../constants\";\n\nconst defaultState = fromJS({\n  dataList: [],\n  totalLList: [],\n  dayList: [],\n  codeList: [],\n  mv20CodeList: CHART_CODE_LIST,\n  mv20DataList: [],\n  chartList:[],\n  breadthDays: 100,\n  isLoading: true,\n  lastBreadth: 0,\n  lastTime: IS_LOADING_STRING,\n});\n\n\nconst changeCurrentCity = (state, action) => {\n  var result = {\n    \"currentCity\": action.currentCity,\n    \"currentZoom\": action.currentZoom,\n  }\n  return state.merge(result)\n}\n\nconst initDataList = (state, action) => {\n  return state.merge({\n    dataList: action.dataList,\n    totalList: action.totalList,\n    dayList:action.dayList,\n    codeList:action.codeList,\n    mv20CodeList:action.mv20CodeList,\n    mv20DataList:action.mv20DataList,\n    isLoading:action.isLoading,\n    lastBreadth:action.lastBreadth,\n    lastTime:action.lastTime,\n  })\n}\n\n// state    整个DOM的数据库\n// action\n// reducer 可以接收state，但是不可以在修改stacurrentCityte\n\nconst reducer = (state = defaultState, action) => {\n  switch(action.type) {\n    case constants.INIT_DATA_LIST:\n      return initDataList(state, action)\n    case constants.CHANGE_CURRENT_CITY:\n      return changeCurrentCity(state, action)\n    default:\n      return state;\n  }\n}\n\n\n\nexport default reducer;","import { combineReducers } from 'redux-immutable';\nimport { reducer as sp500Reducer } from '../sp500/store';\n\nconst reducer = combineReducers({\n\t// vipmap: vipmapReducer,\n\tsp500: sp500Reducer,\n});\n\nexport default reducer;\n","import {createStore, applyMiddleware, compose} from 'redux';\nimport thunk from 'redux-thunk';\nimport reducer from \"./reducer\";\n\n/*\n  redux-sagas 中间件把异步放到单独的文件进行管理\n  redux-thunk 中间件把异步放到action中\n */\n\n// https://github.com/zalmoxisus/redux-devtools-extension/#12-advanced-store-setup\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}) : compose;\nconst enhancer = composeEnhancers(\n\tapplyMiddleware(thunk),\n\t// other store enhancers if any\n);\n\nconst store = createStore(\n\treducer,\n\tenhancer // redux 中间件\n);\n\nexport default store;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from \"react-redux\"\n\nimport 'antd/dist/antd.css';\n\nimport SP500 from './sp500';\nimport store from \"./store\";\n\nconst App = (\n    <Provider store={store}>\n        <SP500/>\n    </Provider>\n)\n\nReactDOM.render(\n    App,\n    document.getElementById('breadth')\n);\n"],"sourceRoot":""}